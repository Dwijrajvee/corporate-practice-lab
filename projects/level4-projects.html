<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Level 4: Commercial Awareness - CPL</title>
  <style>
    body { font-family: -apple-system, system-ui, sans-serif; background: #f5f7fa; margin: 0; padding: 20px; line-height: 1.6; color: #1f2937; }
    .container { max-width: 900px; margin: 0 auto; }
    
    .nav { margin-bottom: 20px; }
    .nav a { color: #666; text-decoration: none; font-size: 0.9rem; }

    /* HEADER */
    .header-card { background: white; padding: 30px; border-radius: 12px; border-left: 6px solid #16a34a; box-shadow: 0 2px 4px rgba(0,0,0,0.05); margin-bottom: 30px; }
    h1 { margin: 0; font-size: 1.8rem; color: #111827; }

    /* LESSON CARD */
    .lesson-card { background: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .formula-box { background: #1f2937; color: #fbbf24; padding: 20px; font-family: monospace; font-size: 1.1rem; border-radius: 8px; text-align: center; margin: 20px 0; }

    /* SIMULATION UI */
    .calc-interface { display: flex; gap: 20px; margin-top: 20px; }
    .data-panel { flex: 1; background: #eff6ff; padding: 20px; border-radius: 8px; border: 1px solid #bfdbfe; }
    .input-panel { flex: 1; background: white; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb; }
    
    .data-row { display: flex; justify-content: space-between; margin-bottom: 10px; border-bottom: 1px dashed #cbd5e1; padding-bottom: 5px; }
    .data-label { font-weight: bold; color: #4b5563; }
    .data-val { font-family: monospace; font-weight: bold; color: #1e3a8a; }

    input { width: 100%; padding: 10px; margin-top: 5px; margin-bottom: 15px; border: 1px solid #d1d5db; border-radius: 6px; box-sizing: border-box; font-size: 1rem; }
    
    .btn-calc { background: #16a34a; color: white; border: none; padding: 12px; width: 100%; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 1rem; }
    .btn-calc:hover { background: #15803d; }

    .result-box { display: none; margin-top: 20px; padding: 15px; border-radius: 8px; text-align: center; }
    .success { background: #dcfce7; color: #166534; border: 1px solid #86efac; }
    .fail { background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }

  </style>
</head>
<body>

  <div class="container">
    <div class="nav"><a href="track-projects.html">&larr; Back to Level Map</a></div>

    <div class="header-card">
      <h1>Level 4: The Money Math</h1>
      <p>Partners don't just want legal arguments. They want the number. "How many Crores are we claiming?"</p>
    </div>

    <div class="lesson-card">
      <h3>1. The Logic: "One-Time Hit" vs. "Tariff Hike"</h3>
      <p>When a tax increases, we can ask for compensation in two ways:</p>
      <ul>
        <li><strong>Lump Sum:</strong> "Pay me ₹50 Crores now to cover the extra tax." (Preferred by Developers).</li>
        <li><strong>Annuity (Tariff Hike):</strong> "Increase my tariff by ₹0.10/unit for the next 25 years." (Preferred by Discoms).</li>
      </ul>
      <p>Today, you will calculate the <strong>Lump Sum</strong> claim for the Solar Modules.</p>

      <div class="formula-box">
        Claim = (Total Capacity × Cost Per MW) × % of Goods Affected × (New Tax - Old Tax)
      </div>
    </div>

    <div class="lesson-card">
      <h3>2. The Task: Calculate the GST Claim</h3>
      <p>Use the project data on the left to calculate the exact claim amount in Crores.</p>

      <div class="calc-interface">
        <div class="data-panel">
          <h4 style="margin-top:0; color:#1e40af;">Project Sheet</h4>
          
          <div class="data-row">
            <span class="data-label">Project Capacity</span>
            <span class="data-val">500 MW</span>
          </div>
          <div class="data-row">
            <span class="data-label">Total Project Cost</span>
            <span class="data-val">₹ 5 Cr / MW</span>
          </div>
          <div class="data-row">
            <span class="data-label">Solar Module Component</span>
            <span class="data-val">60% of Total Cost</span>
          </div>
          <div class="data-row">
            <span class="data-label">Old GST Rate</span>
            <span class="data-val">5%</span>
          </div>
          <div class="data-row">
            <span class="data-label">New GST Rate</span>
            <span class="data-val">12%</span>
          </div>
          
          <p style="font-size:0.8rem; color:#666; margin-top:10px;">
            *Note: Tax only applies to the "Solar Module Component," not the land or labor.
          </p>
        </div>

        <div class="input-panel">
          <label>1. Total Cost of Project (in Cr):</label>
          <input type="number" id="step1" placeholder="e.g. 1000">

          <label>2. Cost of Solar Modules only (in Cr):</label>
          <input type="number" id="step2" placeholder="e.g. 600">

          <label>3. Tax Difference (%):</label>
          <input type="number" id="step3" placeholder="e.g. 5">

          <label><strong>Final Claim Amount (in Cr):</strong></label>
          <input type="number" id="finalAns" placeholder="e.g. 50.5">

          <button class="btn-calc" onclick="checkMath()">Submit Calculation</button>
        </div>
      </div>

      <div id="result" class="result-box"></div>
      
      <div id="nextBtn" style="display:none; text-align:center; margin-top:20px;">
        <a href="track-projects.html" style="background:#111827; color:white; padding:12px 25px; border-radius:6px; text-decoration:none;">Return to Map (Level 4 Done)</a>
      </div>

    </div>

  </div>

  <script>
    function checkMath() {
      // LOGIC:
      // Total Cost = 500 * 5 = 2500 Cr
      // Module Cost = 60% of 2500 = 1500 Cr
      // Tax Diff = 12 - 5 = 7%
      // Claim = 7% of 1500 = 105 Cr

      const userAns = parseFloat(document.getElementById("finalAns").value);
      const box = document.getElementById("result");

      if (userAns === 105) {
        box.style.display = "block";
        box.className = "result-box success";
        box.innerHTML = "<strong>✅ Correct!</strong><br>₹105 Crores is the exact impact. You just saved the client's profit margin.";
        document.getElementById("nextBtn").style.display = "block";
      } else {
        box.style.display = "block";
        box.className = "result-box fail";
        box.innerHTML = "<strong>❌ Incorrect.</strong><br>Hint: First find total cost (500*5). Then take 60% of that. Then take 7% of that result.";
      }
    }
  </script>

</body>
</html>
